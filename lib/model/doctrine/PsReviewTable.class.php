<?php

/**
 * PsReviewTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PsReviewTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object PsReviewTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('PsReview');
    }
    public function doSelectQuery(Doctrine_Query $query)
    {

        $a = $query->getRootAlias();

        $query->select (
            $a . '.*, ' .
            'm.name AS class_name, ' .
            'v.title AS review_relative, ' .
            'CONCAT(s.first_name, " ", s.last_name) AS student_name, ' .
            'CONCAT(e.first_name, " ", e.last_name) AS member_name, ' .
            'p.title AS cate_review_name, ' .
            'c.school_name AS school_name, ' .
            'w.title as title_workplace,' .
            'CONCAT(u.first_name, " ", u.last_name) AS updated_by' );

            $query->leftJoin ( $a . '.UserUpdated u' );
            $query->leftJoin ( $a . '.PsCustomer c');
            $query->leftJoin ( $a . '.PsWorkPlaces w');
            $query->leftJoin ( $a . '.PsCategoryReview p');
            $query->leftJoin ( $a . '.MyClass m');
            $query->leftJoin ( $a . '.PsReviewRelative v');
            $query->leftJoin ( $a . '.Student s');
            $query->leftJoin ( $a . '.PsMember e');

         return $query;
    }
}
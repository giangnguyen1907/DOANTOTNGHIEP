<?php

/**
 * PsFeeNewsLettersTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PsFeeNewsLettersTable extends Doctrine_Table {

	/**
	 * Returns an instance of this class.
	 *
	 * @return object PsFeeNewslettersTable
	 */
	public static function getInstance() {

		return Doctrine_Core::getTable ( 'PsFeeNewsLetters' );

	}
	
	public function doSelectQuery(Doctrine_Query $query) {

		$a = $query->getRootAlias ();

		$query->select ( $a . '.id AS id, ' . $a . '.ps_year_month AS ps_year_month, ' . $a . '.title AS title, ' . $a . '.note AS note,' . $a . '.is_public AS is_public,' . $a . '.number_push_notication AS number_push_notication, ' . $a . '.updated_at AS updated_at,' . 'CONCAT(u.first_name, " ", u.last_name) AS updated_by' );

		$query->leftJoin ( $a . '.UserUpdated u' );
		

		return $query;

	}

	/**
	 * Kiểm tra xem đã có dữ liệu chưa
	 */
	public function getCheckFeeNewsLetters($fee_id) {
		$query = $this->createQuery ( 'a' );
		$query -> select('a.id AS id, a.ps_workplace_id AS ps_workplace_id,a.is_public AS is_public,a.number_push_notication AS number_push_notication,wp.ps_customer_id AS ps_customer_id, wp.id AS wp_id');
		$query -> innerJoin('a.PsWorkPlaces wp');
		$query -> addWhere('a.id =?',$fee_id);
		return $query->fetchOne();
	}
	
}
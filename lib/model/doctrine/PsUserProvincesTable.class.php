<?php

/**
 * PsUserProvincesTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PsUserProvincesTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object PsUserProvincesTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('PsUserProvinces');
    }
    
    /** Lấy tỉnh thành quản lý của user **/
    public function getListByUserId($user_id) {

		$query = $this->createQuery ( 'up' );

		$query->select ( 'up.*' );

		$query->innerJoin( 'up.PsProvinces p ON p.id = up.ps_province_id' );

		$query->innerJoin ( 'up.Users u ON u.id = up.user_id' );

		$query->addWhere ( 'u.id = ?', $user_id );

		return $query->execute ();
	}    
}
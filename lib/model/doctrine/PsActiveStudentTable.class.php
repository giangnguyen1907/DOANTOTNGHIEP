<?php

/**
 * PsActiveStudentTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PsActiveStudentTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object PsActiveStudentTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('PsActiveStudent');
    }
    public function doSelectQuery(Doctrine_Query $query)
    {

        $a = $query->getRootAlias();

        $query->select (
            $a . '.*, ' .
            'c.name AS class_name, ' .
            'CONCAT(u.first_name, " ", u.last_name) AS updated_by' );

            $query->leftJoin ( $a . '.UserUpdated u' );
            $query->leftJoin ( $a . '.MyClass c');
			$query->OrderBy	 ( $a . '.id DESC');

        return $query;
    }

    public function getPsActiveStudentByField($ps_active_student_id,$getField = null) {
        
        $query = $this->createQuery () ->select ( $getField != '' ? $getField : '*' );
        
        $query->addWhere ( 'id = ?', $ps_active_student_id );
        
        return $query->fetchOne ();
    }
}
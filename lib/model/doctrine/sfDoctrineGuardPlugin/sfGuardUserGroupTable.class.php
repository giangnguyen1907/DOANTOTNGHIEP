<?php

/**
 * sfGuardUserGroupTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class sfGuardUserGroupTable extends PluginsfGuardUserGroupTable {

	/**
	 * Returns an instance of this class.
	 *
	 * @return object sfGuardUserGroupTable
	 */
	public static function getInstance() {

		return Doctrine_Core::getTable ( 'sfGuardUserGroup' );
	}

	// ham tra ve nhom nguoi dung theo id nguoi dung
	public function getGroupByUserId($user_id, $ps_customer_id) {

		$query = $this->createQuery ( 'sfGuardUserGroup ug' );
		
		$query->select ( 'ug.group_id as group_id, ' . 'g.name as group_name ');
		
		$query->innerJoin ( 'ug.Group g' );
		
		$query->addWhere ( 'ug.user_id = ?', $user_id );
		
		if ($ps_customer_id > 0) {
			$query->addWhere ( 'g.ps_customer_id = ?', $ps_customer_id );		
		}

		return $query->execute ();
	}
}